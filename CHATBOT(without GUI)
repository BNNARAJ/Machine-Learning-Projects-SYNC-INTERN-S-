import json
import random
from fuzzywuzzy import fuzz

# Load the JSON data
with open('newintents.json', 'r') as file:
    data = json.load(file)

# Function to get a response based on user input
def get_response(user_input):
    best_match = {'intent': None, 'score': 0}
    for intent in data['intents']:
        for pattern in intent['patterns']:
            similarity_score = fuzz.partial_ratio(pattern.lower(), user_input.lower())
            if similarity_score > best_match['score']:
                best_match['intent'] = intent
                best_match['score'] = similarity_score
    
    if best_match['score'] > 50:  # Adjust the threshold as needed
        return random.choice(best_match['intent']['responses'])
    else:
        return "I'm sorry, I don't understand."

# Main loop for user interaction
print("Bot: Hi, I am your paramedic assistant. How can I help you?")
while True:
    user_input = input("You: ")
    if user_input.lower() == 'exit':
        print("Bot: Goodbye!")
        break
    response = get_response(user_input)
    print("Bot:", response)
